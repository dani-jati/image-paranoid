import subprocess
import sys
from PySide6.QtWidgets import QApplication, QMainWindow, QWidget, QVBoxLayout, QPushButton

# Import your tools
from tools.shoulder_tilt import Dashboard as ShoulderTiltTool
from tools.head_height import Dashboard as HeadHeightTool
from tools.face_width import Dashboard as FaceWidthTool
from tools.cropper import Dashboard as CropperTool

class HomePage(QMainWindow):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Measurement Suite ‚Äî Homepage")
        self.resize(600, 400)

        central = QWidget()
        self.setCentralWidget(central)
        layout = QVBoxLayout(central)

        # Buttons for each tool
        btn_cropper = QPushButton("üìê Run Cropper Script")
        btn_cropper.clicked.connect(self.run_cropper_script)
        layout.addWidget(btn_cropper)

        btn_tilt = QPushButton("‚¶§ Shoulder Tilt Tool")
        btn_tilt.clicked.connect(self.open_shoulder_tilt)
        layout.addWidget(btn_tilt)

        btn_head_height = QPushButton( "üìè Head Height Tool" )
        btn_head_height.clicked.connect(self.open_head_height)
        layout.addWidget(btn_head_height)

        btn_face_width = QPushButton( "üìè Face Width Tool" )
        btn_face_width.clicked.connect(self.open_face_width)
        layout.addWidget(btn_face_width)

        # Add more buttons as you add tools
        # btn_tool3 = QPushButton("Tool 3")
        # layout.addWidget(btn_tool3)

    def open_shoulder_tilt(self):
        self.tool = ShoulderTiltTool()
        self.tool.show()

    def open_head_height(self):
        self.tool = HeadHeightTool()
        self.tool.show()

    def open_face_width(self):
        self.tool = FaceWidthTool()
        self.tool.show()

    def run_cropper_script(self):
        self.tool = CropperTool()
        self.tool.process();

        """
        try:
            self.statusBar().showMessage("üìê Cropper script launched.")
            subprocess.Popen(["python3","tools/cropper.py"])
            self.statusBar().showMessage("‚úÖ Cropper script finished.")
        except Exception as e:
            self.statusBar().showMessage(f"‚ö†Ô∏è Failed to launch cropper.py: {e}")
        """

if __name__ == "__main__":
    app = QApplication(sys.argv)
    home = HomePage()
    home.show()
    sys.exit(app.exec())

